pipeline {
	parameters {
		choice(name: 'CHOICE', choices: ['build', 'test'])
	}
    agent { 
		docker { 
			image 'alpine:latest' 
		}
	}
    stages {
    	stage('build') {
		when {
			environment name: 'CHOICE', value 'build'
		}
		steps {
			sh 'echo "Running Build Step"'
		}
	}
	stage('test') {
		when {
			environment name: 'CHOICE', value 'build'
		}
		steps {
			sh 'echo "Running Test Step"'
		}
	}
    }
}
