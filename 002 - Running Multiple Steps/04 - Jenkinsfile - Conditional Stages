pipeline {
	parameters {
		choice(choices: ['build', 'test'], name: 'REQUESTED_STAGE')
	}
    agent { 
		docker { 
			image 'alpine:latest' 
		}
	}
    stages {
    	stage('build') {
		when {
			expression { params.REQUESTED_STAGE == 'build' }
		}
		steps {
			sh 'echo "Running Build Step"'
		}
	}
	stage('test') {
		when {
			expression { params.REQUESTED_STAGE == 'test' }
		}
		steps {
			sh 'echo "Running Test Step"'
		}
	}
    }
}
